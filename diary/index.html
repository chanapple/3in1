<!DOCTYPE html>
<html lang="ko">
<style>
	table {
		width: 100%;
		height: 700px;
		}

	canvas {
	  width: 100%;
	  height: 700px;
	}

</style>
    

<script language="javascript">
	var today = new Date(); //오늘 날짜 : Thu Jul 11 2024 20:02:36
	var date = new Date();
	
	//이전달
	function beforem() //이전 달을 today에 값을 저장
	{ 
		today = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate()); //Jul(7)-1 하여 6
		autoReload(); //만들기
	}
	
	//다음달
	function nextm()  //다음 달을 today에 저장
	{
		today = new Date(today.getFullYear(), today.getMonth() + 1, today.getDate()); //Jul(7)+1 하여 8
		autoReload(); 
	}
	
	//오늘선택
	function thisMonth(){
		today = new Date();
		autoReload();
	}

	function autoReload()
	{
		var nMonth = new Date(today.getFullYear(), today.getMonth(), 1); //현재달의 첫째 날
		var lastDate = new Date(today.getFullYear(), today.getMonth() + 1, 0); //다음 달의 0번째 날=현재 달의 마지막 날
		var tbcal = document.getElementById("calendar"); //테이블 달력을 만들 테이블
		var yearmonth = document.getElementById("yearmonth"); //년도와 월 출력할곳
		yearmonth.innerHTML = today.getFullYear() + "년 "+ (today.getMonth() + 1) + "월"; //년도와 월 출력

		if(today.getMonth()+1==12) //  12월 일 때
		{
			before.innerHTML=("<"+today.getMonth())+"월"; //11월
			next.innerHTML="1월"+">";
			
		}
		else if(today.getMonth()+1==1) //  1월 일 때
		{
			before.innerHTML="<"+"12월";
			next.innerHTML=(today.getMonth()+2)+"월" +">"; //2월
		}
		else //   둘 다 아닐 때
		{
			before.innerHTML="<"+(today.getMonth())+"월";
			next.innerHTML=(today.getMonth()+2)+"월"+">";
		}


		// 남은 테이블 줄 삭제
		while (tbcal.rows.length > 2) 
		{
			tbcal.deleteRow(tbcal.rows.length - 1);
		}
		var row = null;
		row = tbcal.insertRow();
		var cnt = 0;
		var dayCheck = (nMonth.getDay()==0) ? 7 : nMonth.getDay(); //일요일을 마지막으로 넣기 위해서.

		 // 1일 시작칸 찾기
		for (i = 0; i < (dayCheck-1); i++) 
		{
			cnt = cnt + 1;	//요일값
			cell = row.insertCell();
			
			if (i>4) { //주말
				cell.style.backgroundColor = "#f7f7f7";
			}
		}


		// 달력 출력
		for (i = 1; i <= lastDate.getDate(); i++) // 1일부터 마지막 일까지
		{ 
			cell = row.insertCell();
			
			var str="";
			
			/*str += "<div>"+i+"</div>";*/
			var day = (i<10) ? "0"+i : i;            	
			str += "<div id='"+day+"'></div>"; //나중에 원하는 날에 일정을 넣기위해 id값을 날짜로 설정
			str += "<div style='text-align: right; font-size: 14px; margin-right: 5px;'>"+i+"</div>";

            cell.innerHTML = str;
			
			cnt = cnt + 1;
			if (cnt % 7 == 6) {//토요일
				var str="";
				//str += "<div>"+i+"</div>";
				var day = (i<10) ? "0"+i : i;            	
				str += str += "<div style='text-align: right; font-size: 14px; margin-right: 5px;'>"+i+"</div>";
				str += "<div id='"+day+"'></div>";
				cell.innerHTML = str;
				cell.style.color = "#009de0"; //파란색
				cell.style.backgroundColor = "#f7f7f7"; //토요일배경 회색                   
			}
			if (cnt % 7 == 0) { //일요일
				var str="";
				//str += "<div>"+i+"</div>";
				var day = (i<10) ? "0"+i : i;
                str += str += "<div style='text-align: right; font-size: 14px; margin-right: 5px;'>"+i+"</div>";
				str += "<div id='"+day+"'></div>";
				cell.innerHTML = str;
				row = calendar.insertRow();// 줄 추가
				cell.style.color = "#ed5353"; //빨간색
				cell.style.backgroundColor = "#f7f7f7"; //일요일배경 회색
			}
			
			//마지막 날짜가 지나면 일요일까지 칸 그리기
			if(lastDate.getDate() == i && ((cnt % 7) != 0)){
				var add = 7 - (cnt % 7);
				for(var k = 1; k <= add; k++){
					cell = row.insertCell();
					cnt = cnt + 1;
					if (cnt % 7 == 6) {//토요일
						cell.style.backgroundColor = "#f7f7f7";
					}
					if (cnt % 7 == 0) { //일요일
						cell.style.backgroundColor = "#f7f7f7";
					}
				}
			}
			
			//오늘날짜배경색
			if( today.getFullYear() == date.getFullYear() && today.getMonth() == date.getMonth() && i==date.getDate() )
			{
				cell.style.backgroundColor = "#e2f3da"; //오늘날짜배경색
			}
			
			//마지막 날짜가 지나면 일요일까지 칸 그리기
			if(lastDate.getDate() == i && ((cnt % 7) != 0)){
				var add = 7 - (cnt % 7);
				for(var k = 1; k <= add; k++){
					cell = row.insertCell();
					cnt = cnt + 1;
					if (cnt % 7 == 6) {//토요일
						cell.style.backgroundColor = "#f7f7f7";
					}
					if (cnt % 7 == 0) { //일요일
						cell.style.backgroundColor = "#f7f7f7";
					}
				}
			}
			  
		}
		
		//원하는 날짜 영역에 내용 추가하기
		var tdId = "01"; //1일
		var str = "";
		str += "<br>09:00 일정1";
		str += "<br>12:00 일정2 \n";
		document.getElementById(tdId).innerHTML = str;
	}

</script>
<body onload="autoReload();">
	<button id="drawButton">그리기</button>
	<div>
        <label for="slider">PX</label>
        <input type="range" min="1" max="10" value="10" id="slider" onchange="lineWidthReSizeForSlider()">
    </div>
	
	<canvas id="myCanvas"  style="position: absolute; z-index: 1;"></canvas>

	<script>
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        var isDrawing = false;
        var lastX = 0;
        var lastY = 0;
		let lineWidth = 10;

        context.canvas.width  = window.innerWidth;
        context.canvas.height = window.innerHeight;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

		document.getElementById('drawButton').addEventListener('click', toggleDrawing);

		function toggleDrawing() {
			isDrawing = !isDrawing;
			if (isDrawing) {
				document.getElementById('drawButton').textContent = 'stop';
			} else {
				document.getElementById('drawButton').textContent = '그리기';
			}
		}

		function lineWidthReSizeForSlider() {
			let sliderValue = document.getElementById('slider')
			lineWidth = sliderValue.value;
			document.getElementById('lineWidth').innerText = String(lineWidth);
		}

        function startDrawing(event) {
            isDrawing = true;
            [lastX, lastY] = [event.offsetX, event.offsetY];
        }

        function draw(event) {
            if (!isDrawing) return;
            context.beginPath();
            context.moveTo(lastX, lastY);
            context.lineTo(event.offsetX, event.offsetY);
			context.lineWidth = lineWidth; 
            context.stroke();
            [lastX, lastY] = [event.offsetX, event.offsetY];
        }

        function stopDrawing() {
            isDrawing = false;
        }
    </script>

	<table align="center" id="calendar">
		<tr>
			<td>
			<a id="before" href="javascript:beforem()"></a>
			</td>
			<td colspan="4" align="center">
			<div id="yearmonth"></div>
			</td>
			<td>
			<a id="next" href="javascript:nextm()"></a>
			</td>
			<td>
			<a href="javascript:thisMonth()">오늘</a>
			</td>
		</tr>
        
		<tr>
			<td width="14%" style="text-align: right;">월</td>
			<td width="14%" style="text-align: right;"> 화 </td>
			<td width="14%" style="text-align: right;"> 수 </td>
			<td width="14%" style="text-align: right;"> 목 </td>
			<td width="14%" style="text-align: right;"> 금 </td>
			<td width="14%" style="text-align: right;"><font color="#009de0">토</font></td>
			<td width="14%" style="text-align: right;"><font color="#ed5353">일</font></td>
		</tr>
	</table>
</body>
</html>